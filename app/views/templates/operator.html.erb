<div class="operator">
  <div class="password-overlay">
    <p>Please enter the campaign password to continue:</p>
    <form class="form-inline" role="form">
      <input data-ng-model="campaignPassword" type="password" placeholder="password..." class="form-control" style="width:40%;" ng-enter="validatePassword()" autofocus>

      <div class="btn btn-primary" data-ng-click="validatePassword()">Validate</div>
    </form>
    <div class="alert alert-danger">Invalid Password</div>
  </div>
  <div class="endchat-overlay">
    <form class="form" role="form" style="width:700px;margin:auto;">
      <div class="form-group" style="width:49%;display:inline-block;">
        <label class="control-label">Response to follow Jesus</label>
        <div class="">
          <p class="form-control-static">{{endchat_session.activity}}</p>
        </div>
      </div>
      <div class="form-group" style="width:49%;display:inline-block;margin-bottom:0;vertical-align:top;">
        <label class="control-label">Link shared by</label>
        <div class="">
          <img src="{{operator_data.profile_pic}}" style="float:left;">
          <p class="form-control-static">Bob Operator</p>
        </div>
      </div>
    <h2>Who are they</h2>
      <div class="form-group">
        <label>Persons name</label>
        <input type="text" class="form-control" data-ng-model="endchat_session.visitor_name">
      </div>

      <div class="form-group">
        <label>Contact email</label>
        <input type="email" class="form-control" data-ng-model="endchat_session.visitor_email">
      </div>
    <h2>Next steps</h2>
      <div class="form-group">
        <label>Call to action</label>
        <select class="form-control">
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
        </select>
      </div>

      <div class="form-group">
        <label>Notes</label>
        <textarea class="form-control" rows="3" data-ng-model="endchat_session.notes"></textarea>
      </div>
      <div class="btn btn-primary" data-ng-click="endChatDialogSave()">Save &amp; Close</div>
    </form>
  </div>
  <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <a class="navbar-brand" href="#">
          <strong>
            <i class="fa fa-comments-o">&nbsp;</i>
            Godchat
            <span class="text-muted">Beta</span>
          </strong>
        </a>

        <div class="shareurl">
          <img src="{{operator_data.profile_pic}}">
          <h3>{{operator_data.name}}</h3>
          {{operator_chat_url}} <a href="http://www.facebook.com/sharer/sharer.php?s=100&p[url]={{operator_chat_url}}&p[images][0]=&p[title]=" target="_blank" style="color:#fff;">
          <i class="fa fa-share">&nbsp;</i>
        </a>

        </div>
      </div>
    </div>
  </div>
  <div class="activity">
    <h3 class='special'>Active Sessions</h3>
    <ul class="media-list" id="activesessions">
      <li class="media link" id="session_{{session.chat_uid}}" data-ng-click="switchChat(session.chat_uid);" ng-repeat="session in active_sessions">
        <div class="pull-left">
          <img class="media-object" src="{{session.visitor_profile}}" alt="">
        </div>
        <div class="media-body">
          <h4 class="media-heading">{{session.visitor_name}}</h4>
          <i class="fa fa-exclamation newmessage">&nbsp;</i>
          <p>{{session.activity}}</p>
        </div>
      </li>
    </ul>
  </div>
  <div class="operator_status operator_status_offline" data-ng-click="toggleOperatorStatus()" title="Click to toggle status">
    Offline
  </div>
  <div id="chat">
    <div class="chatbox" id="chatbox_{{session.chat_uid}}" ng-repeat="session in active_sessions" style="display:none;">
      <div class="btn btn-danger" data-ng-click="endChat(session.chat_uid)" style="position:absolute;margin:12px;right:0;z-index:1;">End Chat</div>
      <div data-ng-show="operator_edit_mode" style="margin-top: 8px;">
        <form class="form-horizontal" role="form">
          <div class="form-group">
            <label class="col-sm-2 control-label">Visitor Name</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" data-ng-model="session.visitor_name" ng-enter="operator_edit_mode=false">
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">Visitor Email</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" data-ng-model="session.visitor_email" ng-enter="operator_edit_mode=false">
            </div>
          </div>
        </form>
      </div>
      <h1 class="special" data-ng-show="!operator_edit_mode" data-ng-click="operator_edit_mode=true" style="cursor: pointer;">
        {{session.visitor_name}}
      </h1><span data-ng-show="!operator_edit_mode" style="text-align: center;width: 100%;position: absolute;margin-top: -32px;">{{session.visitor_email}}</span>
      <ul class="conversation">
        <li class="{{message.class}}" data-ng-repeat="message in session.chatMessages">
          <div class="person" ng-if="message.person === 'visitor'">{{session.visitor_name}}</div>
          <div class="person" ng-if="message.person !== 'visitor'">{{message.person}}</div>
          <div class="timestamp pull-right timestamp-refresh" timestamp="{{message.time}}">Just
            Now
          </div>
          <div ng-class="message.messageClass">{{message.message}}</div>
        </li>
      </ul>
      <input class="form-control chat-input chat-message" placeholder="Message..." type="text" ng-enter="postMessage(session.chat_uid)">
    </div>
  </div>
</div>

<audio id="newMsgAlert"><source src="<%= asset_path("notify.ogg") %>" type="audio/ogg"><source src="<%= asset_path("notify.mp3") %>" type="audio/mpeg"><source src="<%= asset_path("notify.wav") %>" type="audio/wav"></audio>